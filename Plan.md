# Status-Ming 开发计划

**项目名称**: Status-Ming  
**作者**: lgnorant-lu  
**核心技术**: PySide6  
**DDL**: 2025/05/18(当前2025/05/13)

## 计划概述

Status-Ming 是一个将系统监控与桌面宠物结合的应用程序，通过桌宠的视觉状态反馈计算机的各项性能指标。本计划文档概述了项目从 MVP 阶段到长期愿景的详细分阶段开发路线图。

## 开发原则

- **测试驱动开发 (TDD)**: 优先测试核心逻辑模块（状态机、数据处理等）。对于UI和简单集成，可先快速实现，待MVP后逐步补全详细测试，以保证5天内的开发速度。
- **最小可行产品 (MVP)**: 严格执行，确保MVP真正'最小'且'可行'，聚焦核心体验。
- **快速迭代**: 迭代周期以小时/半天计，确保每日都有可验证进展。
- **模块化设计**: 充分利用 Status 项目的现有模块化成果，新功能也遵循此原则。
- **持续重构**: MVP阶段，仅进行必要的、不影响进度的微小重构。大的结构优化留待MVP后。

## 阶段 1: MVP - 核心桌宠监控功能

**目标**: 实现一个最小可行产品，验证核心的"系统监控 -> 行为逻辑 -> 动画渲染 -> 基础交互"循环。使用极为简单的占位符资源（例如，不同颜色的方块或极简2帧猫咪像素图代表不同状态）。

### Day 1: 基础窗口与核心交互框架 (ETA: 1天)

1. **任务 1.1**: 宠物窗口创建与显示
   - 实现：创建 MainPetWindow (无边框、背景透明 Qt.WA_TranslucentBackground、总在最前 Qt.WindowStaysOnTopHint)
   - 实现：加载并显示一个静态的、单帧的占位符图片作为桌宠
   - 测试：手动验证窗口特性，图片能显示

2. **任务 1.2**: 窗口拖拽功能
   - 实现：实现窗口的鼠标拖拽移动
   - 测试：手动验证拖拽功能

3. **任务 1.3**: 基础应用控制 (系统托盘)
   - 实现：创建系统托盘图标，并添加"退出"菜单项
   - 测试：手动验证托盘图标显示及退出功能
   - **TDD重点**：托盘退出逻辑的单元测试

### Day 2: 系统监控与状态机逻辑 (ETA: 1天)

1. **任务 2.1 (TDD)**: 系统监控数据获取 (CPU)
   - 实现：引入 psutil 库，实现获取CPU平均使用率的功能
   - 测试：验证CPU使用率获取的准确性及异常处理

2. **任务 2.2 (TDD)**: 简化桌宠状态机
   - 实现：创建 PetStateMachine，定义2-3个核心状态
     - IDLE (CPU < 30%)
     - BUSY (CPU >= 30%)
     - (可选) VERY_BUSY (CPU > 70%)
   - 测试：验证状态转换逻辑的准确性

3. **任务 2.3**: 系统监控与状态机集成
   - 实现：将获取到的CPU使用率数据传递给状态机，触发状态转换
   - 测试：手动或通过模拟CPU负载验证状态转换

### Day 3: 占位符动画与状态联动 (ETA: 1天)

1. **任务 3.1**: 极简占位符动画资源准备与加载
   - 实现：为每个状态准备极简的2帧动画序列
   - 实现：确保 AssetManager 能够加载并管理这些序列
   - 测试：验证资源能被正确加载

2. **任务 3.2 (TDD)**: 状态机与动画系统集成
   - 实现：创建状态到动画序列的映射
   - 实现：当状态机状态改变时，切换并播放对应的占位符动画
   - 测试：验证状态与动画映射的正确性，动画切换逻辑
   - 测试：手动观察桌宠动画是否随CPU负载（状态）变化而切换

### Day 4: MVP 交互完善与整体测试 (ETA: 1天)

1. **任务 4.1**: (可选，若时间允许) 基础右键菜单
   - 实现：在系统托盘图标上实现右键菜单，至少包含"显示/隐藏桌宠"、"退出"选项
   - 测试：手动测试

2. **任务 4.2**: 核心循环完整性测试
   - 实现/验证：确保 "系统监控 -> 状态机逻辑 -> 动画渲染" 的核心循环稳定工作
   - 测试：端到端手动测试

3. **任务 4.3**: (可选，若时间允许) 鼠标穿透切换
   - 实现：在托盘菜单添加"允许/禁止与桌宠交互"的选项来切换窗口的 Qt.WindowTransparentForInput 属性
   - 测试：手动测试

### Day 5: 最终测试、Bug修复与打包准备 (ETA: 1天)

1. **任务 5.1**: 集中测试与Bug修复
   - 在目标平台进行测试，修复发现的关键Bug
   - 确保应用基本稳定，资源占用没有极端异常

2. **任务 5.2**: MVP版本代码冻结与打包尝试
   - 使用 PyInstaller 或 cx_Freeze 进行初步打包尝试
   - 确保基本的可执行文件能生成和运行

3. **任务 5.3**: 简要文档与总结
   - 编写一个简短的 README 说明 MVP 的功能和如何运行

## 阶段 2: 后 MVP - 功能增强与扩展基础 (ETA: 11-14 天)

**目标**: 增强核心功能，完善用户体验，并为未来的模块化扩展重构/夯实架构。这个阶段是承上启下的关键。

### 子阶段 2.1: UI 与用户体验优化 (ETA: 3天)

1. **任务 2.1.1 (TDD)**: 实现 `StatsPanel` (系统信息面板)
   - **头脑风暴**:
     - 内容：不仅是CPU、内存，后续可以扩展到GPU、磁盘、网络速度的实时数据显示。
     - 样式：简洁、科技感、可定制主题 (参考 `status/ui/components/theme.py` 和 `styles` 目录)。
     - 交互：可点击展开/折叠，可选择显示哪些监控项，可能需要一个独立的设置界面或在主设置中配置。
     - 集成：`StatsPanel` 可以是一个独立的 QWidget，通过事件系统 (EventSystem) 订阅 SystemMonitor 发布的数据更新事件。
     - 桌宠联动：面板的显示/隐藏可以由桌宠的某个交互触发（例如，特定点击模式，或者一个专门的"显示状态"动画）。
   - **完善设计**:
     - 考虑使用 QPropertyAnimation 实现面板平滑展开/折叠效果。
     - 数据展示可以使用自定义绘制的图表（简单的折线图、柱状图）或现成的Qt图表组件（如果不想引入太大依赖，自定义绘制更灵活）。`status/monitor/visualization.py` 可能是相关模块。
     - 面板的默认位置、大小、透明度应可配置。

2. **任务 2.1.2 (TDD)**: 增强窗口交互
   - **头脑风暴**:
     - 边界检测：防止桌宠被拖出屏幕无法找回。需要考虑多显示器情况。
     - 吸附边缘：(可选高级功能) 拖拽到屏幕边缘时自动吸附。
     - 缩放：(可选高级功能) 通过鼠标滚轮或特定手势缩放桌宠大小（需要 AssetManager 支持不同尺寸的资源或实时缩放）。
     - 透明度调整：(可选高级功能) 允许用户调整桌宠窗口的整体透明度。
   - **完善设计**:
     - 边界检测逻辑应在 DragManager 或 MainPetWindow 中实现，实时获取屏幕尺寸并限制窗口坐标。
     - 可以增加一个"重置位置"的菜单项，以防万一。

### 子阶段 2.2: 监控与行为扩展 (ETA: 3-4天)

1. **任务 2.2.1 (TDD)**: 增加更多监控项
   - **头脑风暴**:
     - GPU使用率/温度：需要跨平台的库，如 GPUtil (Python) 或通过调用特定命令行工具 (如 nvidia-smi for NVIDIA)。
     - 磁盘I/O：psutil 可以获取。
     - 网络活动（上传/下载速度）：psutil 可以获取。
     - 特定进程监控：(高级) 允许用户指定监控某个进程的资源占用，当该进程活跃时桌宠有特殊表现。
   - **完善设计**:
     - 扩展 `status/monitoring/system_info.py` (或 `status/monitor/data_collector.py`) 添加新的数据收集方法。
     - 确保新监控项是可选的，用户可以在设置中启用或禁用，以减少不必要的系统开销。
     - 新增的数据也应通过 EventSystem 发布。

2. **任务 2.2.2 (TDD)**: 丰富桌宠行为状态
   - **头脑风暴**（以猫咪为例）:
     - 基于时间：早晨（打哈欠、伸懒腰）、中午（困倦、打盹）、傍晚（活跃）、深夜（睡觉）。
     - 基于环境：鼠标长时间不动（猫咪睡觉或自娱自乐）、用户疯狂操作鼠标键盘（猫咪受惊或兴奋）、播放音乐（猫咪跟随节奏摇摆？）。
     - 基于网络：网络断开（猫咪焦躁或疑惑）、下载大文件（猫咪叼着进度条跑？）。
     - 基于特定应用：打开游戏（猫咪戴上耳机？）、打开IDE（猫咪叼着咖啡杯？）。
     - 情感系统引入：（参考 `status/behavior/emotion_system.py`) 可以引入饥饿值、娱乐值、疲劳值等内部状态，驱动自主行为。例如，长时间未交互，娱乐值下降，猫咪会尝试吸引用户注意。
   - **完善设计**:
     - 在 PetStateMachine (或 `status/behavior/state_machine.py` 和 `behavior_manager.py`) 中添加更多状态和转换规则。
     - 需要 EnvironmentSensor (`status/behavior/environment_sensor.py`) 来感知更多环境变化（如当前活动窗口、音乐播放状态等）。
     - DecisionMaker (`status/behavior/decision_maker.py`) 的逻辑会变得更复杂。

3. **任务 2.2.3 (TDD)**: 配置系统集成
   - **头脑风暴**:
     - 可配置项：监控阈值（CPU高负载定义）、动画帧率、默认窗口位置/大小、各模块开关、主题选择等。
     - 配置文件格式：JSON (如 default_config.json) 或 YAML。
     - 配置UI：一个独立的设置窗口，分类清晰。
   - **完善设计**:
     - 你的 `status/config/config_manager.py` 和 `status/core/config/config_manager.py` 以及 `docs/developer/config_guide.md` 提供了很好的基础。
     - 确保配置更改能动态应用（热重载部分配置，或提示重启）。
     - 配置窗口的UI可以后续在专门的UI美化阶段进行。

### 子阶段 2.3: 核心模块化重构 (ETA: 5-7天)

1. **任务 2.3.1 (TDD)**: 设计插件接口 (Plugin API)
   - **头脑风暴**:
     - 参考 `docs/developer/plugin_development.md`。
     - 插件生命周期：`load()`, `enable()`, `disable()`, `unload()`。
     - 插件能做什么：
       - 注册新的监控项。
       - 添加新的桌宠行为/状态。
       - 提供新的UI面板或交互窗口。
       - 通过 EventSystem 与核心或其他插件通信。
       - 注册自定义命令 (参考 `status/interaction/command/command_manager.py`)。
     - 插件发现机制：例如，扫描特定目录下的插件包。
   - **完善设计**:
     - 定义一个清晰的 `PluginBase` 抽象类，所有插件继承它。
     - 插件应能访问一个受限的"核心API对象"，用于与主程序交互，而不是直接访问所有内部模块。
     - 考虑插件的配置如何与主配置系统集成。

2. **任务 2.3.2 (TDD)**: 实现事件系统增强
   - **头脑风暴**:
     - `status/core/event_system.py` 和 `events.py` 是基础。
     - 事件类型：定义更丰富的标准化事件类型。
     - 优先级/顺序：(可选) 事件处理的优先级。
     - 同步/异步事件：(可选) 根据需要处理。
     - 事件过滤/节流：(参考 `status/interaction/event_filter.py`, `event_throttler.py`) 进一步完善。
   - **完善设计**:
     - 确保事件数据载荷 (payload) 的标准化和文档化。
     - 提供便捷的插件注册/注销事件监听器的方法。

3. **任务 2.3.3**: 更新架构文档
   - **头脑风暴**:
     - 基于新的插件架构和事件系统，更新 `system_architecture.py` (或对应的图表)。
     - 更新 `Design.md`, `Structure.md` (或你项目中对应的文档)。
   - **完善设计**:
     - 使用 PlantUML 或 Mermaid.js (Markdown友好) 等工具绘制清晰的架构图、模块依赖图、事件流图。

## 阶段 3: 功能模块化实现 (ETA: 8-11 天)

**目标**: 基于阶段2打好的模块化基础，开发独立的功能模块。

### 子阶段 3.1: 番茄钟模块 (ETA: 3-4天)

1. **任务 3.1.1 (TDD)**: 番茄钟核心逻辑 (PomodoroModule)
   - **头脑风暴**:
     - 工作/短休息/长休息循环，次数可配置。
     - 计时器功能 (`status/pomodoro/pomodoro_timer.py` 已有基础)。
     - 通过 EventSystem 发布状态变化事件 (开始工作、开始休息、完成等)。
   - **完善设计**:
     - 考虑与系统通知集成 (提醒用户休息/工作)。`status/reminder/notification.py` 可借鉴。
     - 允许暂停和重置。

2. **任务 3.1.2 (TDD)**: 番茄钟 UI (控制面板)
   - **头脑风暴**:
     - 显示当前状态、剩余时间。
     - 控制按钮（开始、暂停、跳过、重置）。
     - 设置（工作时长、休息时长、循环次数）。
   - **完善设计**:
     - 可以是桌宠旁边的一个小面板，或一个可停靠的独立小窗口。
     - UI控制器订阅 PomodoroModule 的事件来更新显示。

3. **任务 3.1.3 (TDD)**: 桌宠行为联动
   - **头脑风暴**（以猫咪为例）:
     - 工作时：猫咪安静地趴着或"监督"用户。
     - 休息时：猫咪放松、玩耍或邀请用户一起休息。
     - 番茄完成时：猫咪欢呼或给予"奖励"动画。
   - **完善设计**:
     - PomodoroModule 发布的状态事件可以被 BehaviorManager 或特定的行为插件监听到，触发桌宠状态改变。

### 子阶段 3.2: 便签模块 (ETA: 3-4天)

1. **任务 3.2.1 (TDD)**: 便签存储逻辑 (NotesModule)
   - **头脑风暴**:
     - CRUD 操作 (`status/notes/note_store.py` 已有基础)。
     - 本地存储（SQLite、JSON文件）。
     - (可选) Markdown 支持、标签、置顶。
   - **完善设计**:
     - 考虑数据同步（如果未来有云端需求，但初期本地即可）。
     - 数据模型的健壮性设计。

2. **任务 3.2.2 (TDD)**: 便签 UI (编辑器界面)
   - **头脑风暴**:
     - 列表视图显示所有便签。
     - 编辑器视图用于创建/编辑单个便签。
     - 简洁易用，支持富文本或 Markdown 预览。
   - **完善设计**:
     - 可以是一个独立的、可停靠的窗口。
     - UI 风格与整体应用保持一致。

### 子阶段 3.3: 快捷启动器模块 (ETA: 2-3天)

1. **任务 3.3.1 (TDD)**: 快捷启动核心逻辑 (LauncherModule)
   - **头脑风暴**:
     - `status/launcher/launcher_manager.py` 已有基础。
     - 扫描常用应用、允许用户自定义添加应用/文件/网址。
     - 支持参数启动。
   - **完善设计**:
     - 应用列表的存储和管理。
     - 跨平台的可执行文件路径处理。

2. **任务 3.3.2 (TDD)**: 快捷启动 UI
   - **头脑风暴**:
     - 一个可快速呼出的面板（例如通过全局热键 `status/interaction/hotkey.py`）。
     - 应用列表（图标+名称），支持搜索。
   - **完善设计**:
     - UI 响应速度要快。
     - 考虑与桌宠的交互方式，例如桌宠可以"叼出"一个启动器面板。

## 阶段 4: 高级功能与智能化探索 (ETA: 22-31 天)

**目标**: 探索并实现更高级的功能，如个性化、记忆和智能交互。这个阶段充满了探索性，也更令人兴奋。

### 子阶段 4.1: 桌宠记忆与个性化 (ETA: 5-7天)

1. **任务 4.1.1 (TDD)**: 用户数据模型设计
   - **头脑风暴**:
     - 存储内容：用户偏好（哪些模块启用、UI主题）、桌宠互动历史（被点击次数、特定行为触发频率）、常用功能、成就/里程碑。
     - 存储方式：本地 SQLite 数据库是个不错的选择，轻量且功能强大。
   - **完善设计**:
     - 设计清晰的表结构和关系。
     - 考虑数据备份和恢复的简单机制。
     - 隐私保护：明确哪些数据被收集和如何使用。

2. **任务 4.1.2 (TDD)**: 行为调整机制 (个性化引擎)
   - **头脑风暴**:
     - 基于互动历史：如果用户经常点击桌宠某个部位，桌宠可以发展出对该部位被触摸的特定反应（喜欢或不喜欢）。
     - 基于功能使用：如果用户经常使用番茄钟，桌宠可能会在用户看起来长时间工作时主动提示是否开启番茄钟。
     - "习惯"养成：桌宠根据一天中的时间、用户的活动模式，逐渐形成自己独特的日常作息和行为偏好。例如，如果用户每天下午3点都听音乐，桌宠可能会在这个时间点表现出期待音乐的动画。
     - 情感积累：(`status/behavior/emotion_system.py`) 长期积极互动提升"好感度"，解锁新动画或交互；长期消极互动（或被忽略）可能导致桌宠"情绪低落"。
   - **完善设计**:
     - 个性化引擎会是 BehaviorManager 和 DecisionMaker 的重要组成部分。
     - 需要设计一套规则或简单的机器学习模型（如果想更深入）来根据存储的用户数据调整行为权重或触发条件。
     - "个性"的成长应该是缓慢且可感知的，给用户带来惊喜。

### 子阶段 4.2: LLM 集成 (探索性) (ETA: 7-10天)

1. **任务 4.2.1**: LLM API 集成研究
   - **头脑风暴**:
     - API选择：OpenAI (GPT系列), Google (Gemini), Anthropic (Claude), 或者国内的各种模型服务商。考虑API的调用成本、速率限制、响应速度、多轮对话能力。
     - 本地模型：如果考虑隐私和成本，可以研究轻量级本地LLM（如Llama 3 8B, Qwen 7B, Phi-3等）的部署和调用，但这会增加应用体积和对用户硬件的要求。
     - 安全性：Prompt注入、API密钥安全存储。
   - **完善设计**:
     - 编写一个评估表，对比不同LLM方案的优缺点。
     - 初期选择一个易于接入的API进行原型验证。

2. **任务 4.2.2 (TDD)**: LLM 集成模块 (LLMModule 或 AI_Agent)
   - **头脑风暴**:
     - 核心功能：发送请求到LLM，接收和解析响应。
     - 上下文管理 (MCP - Model Context Protocol 的雏形)：如何构建有效的Prompt？需要包含桌宠的当前状态、用户的部分历史交互、具体的问题或指令。
     - 意图识别：解析LLM的回复，判断其意图（是闲聊、执行命令、还是提供信息）。
     - 命令映射：如果LLM意图是执行命令，需要将其映射到内部的命令系统 (CommandManager) 或事件。
   - **完善设计**:
     - 设计一个 LLMRequest 和 LLMResponse 数据结构。
     - LLMModule 应能通过 EventSystem 接收需要LLM处理的请求，并将结果以事件形式广播出去或直接调用相应服务。

3. **任务 4.2.3 (TDD)**: 交互界面 (聊天/指令输入)
   - **头脑风暴**:
     - 输入方式：一个小巧的聊天输入框，可以通过热键或点击桌宠特定区域呼出。
     - 显示方式：LLM的回复可以通过气泡提示、独立的聊天记录窗口，或者桌宠用特定的"说话"动画来展现。
     - 语音输入/输出：(超高级) 未来可以集成语音识别和TTS。
   - **完善设计**:
     - UI应简洁，不打扰用户。
     - 考虑对话历史的展示。

### 子阶段 4.3: MCP (多模态控制平台/模型上下文协议) 集成 (探索性) (ETA: 10-14天)

1. **任务 4.3.1**: MCP 概念验证与设计
   - **头脑风暴**:
     - 目标：让LLM不仅能聊天，还能理解用户复杂指令，并将其分解给桌宠内部的不同功能模块（Agents）去执行，并能综合各模块的反馈。
     - 协议内容：
       - Agent能力描述：每个模块（番茄钟、便签、系统监控等）向MCP注册自己能做什么（提供哪些信息，执行哪些动作）。
       - 任务分解与规划：LLM（或一个专门的规划Agent）根据用户指令和Agent能力描述，生成执行计划（调用哪些Agent，以什么顺序，传递什么参数）。
       - 数据格式：统一Agent间以及Agent与LLM间的数据交换格式。
       - 状态与反馈：Agent执行任务后的状态反馈和结果上报。
     - 示例：用户说："帮我打开昨天的笔记，并开始一个25分钟的番茄钟专注于此。" MCP需要协调NotesModule找到笔记，并指令PomodoroModule开始计时，同时桌宠进入"专注工作"状态。
   - **完善设计**:
     - 这实际上是在构建一个迷你的基于LLM的Agent框架。
     - 可以参考LangChain、AutoGen等框架的思想，但用Python和PySide6在本地实现一个轻量版本。
     - EventSystem 仍将是重要的通信骨干。

2. **任务 4.3.2 (TDD)**: 系统命令执行 (安全的)
   - **头脑风暴**:
     - 能力：允许LLM通过MCP间接触发一些安全的系统级操作（例如，打开指定文件夹、运行指定程序、调整音量——需要用户授权）。
     - 安全性是首要考虑：
       - 严格的权限控制：默认不开启，用户需要明确授权。
       - 命令白名单/黑名单：限制可执行的命令范围。
       - 用户确认：对于敏感操作，执行前需要用户二次确认。
       - 沙箱环境：(极高级) 如果可能，在沙箱中执行某些命令。
   - **完善设计**:
     - 创建一个 SystemCommandExecutor 模块，它只执行预定义和经过验证的安全操作。
     - LLM或MCP生成的指令需要经过这个模块的严格审查和转换。

## 阶段 5: 打磨、分发与维护 (ETA: 11-16 天)

**目标**: 提升产品质量，发布应用，并建立维护机制。这个阶段的目标是将探索性的功能稳定下来，并准备公开发布。

### 子阶段 5.1: 性能优化 (ETA: 3-4天)

1. **任务 5.1.1**: 全面性能分析
   - **头脑风暴**:
     - 使用Python的 cProfile 和 memory_profiler 等工具。
     - 关注CPU占用率（特别是在空闲时）、内存泄露、启动时间、UI响应速度。
     - LLM API调用和本地模型推理的性能也是重点。
   - **完善设计**:
     - 制定清晰的性能指标和测试场景。

2. **任务 5.1.2 (TDD)**: 资源管理优化
   - **头脑风暴**:
     - `status/core/cache.py` 和 AssetManager 的进一步优化。
     - 懒加载大型资源。
     - 确保插件卸载时能正确释放所有资源。
     - 优化图片格式和压缩。
   - **完善设计**:
     - 编写测试用例验证资源在不同生命周期阶段的占用和释放。

### 子阶段 5.2: 跨平台兼容性 (ETA: 3-5天)

1. **任务 5.2.1**: Windows 平台测试
   - **头脑风暴**:
     - 特定问题：文件路径格式、系统API调用差异 (如通知、热键、GPU信息获取)、字体渲染、窗口特性表现。
     - 测试环境：虚拟机或真实多平台物理机。
   - **完善设计**:
     - 针对Windows平台建立一个已知问题和解决方案的清单。
     - Windows特定代码封装。

2. **任务 5.2.2**: macOS 平台测试
   - **头脑风暴**:
     - 苹果特定的窗口行为和权限要求。
     - macOS的通知、菜单栏集成。
   - **完善设计**:
     - 针对macOS平台建立一个已知问题和解决方案的清单。
     - macOS特定代码封装。

3. **任务 5.2.3**: Linux 平台测试
   - **头脑风暴**:
     - 不同Linux发行版的差异。
     - Wayland vs X11显示服务器的差异。
   - **完善设计**:
     - 针对Linux平台建立一个已知问题和解决方案的清单。
     - Linux特定代码封装。

### 子阶段 5.3: 打包与分发 (ETA: 2-3天)

1. **任务 5.3.1**: 打包配置
   - **头脑风暴**:
     - PyInstaller (常用) 或 cx_Freeze。
     - 处理依赖项、数据文件（图片、配置文件、插件）的包含。
     - 图标、版本信息嵌入。
   - **完善设计**:
     - 创建可重复的构建脚本（如shell脚本、Makefile或 setup.py 中的自定义命令）。

2. **任务 5.3.2**: 安装程序/便携包
   - **头脑风暴**:
     - Windows: Inno Setup, NSIS 创建安装包。
     - macOS: 创建 .dmg 镜像，应用签名和公证。
     - Linux: 提供 .tar.gz 包，或者更高级的 .deb/.rpm 包，或者 AppImage/Flatpak。
     - 或者，直接提供便携版的zip包。
   - **完善设计**:
     - 测试不同平台上的安装和卸载流程。

### 子阶段 5.4: 文档与支持 (ETA: 3-4天)

1. **任务 5.4.1**: 用户文档
   - **头脑风暴**:
     - `docs/user/getting_started.md`, `configuration.md`, `faq.md`, `troubleshooting.md` 的完善和更新。
     - 所有功能的详细使用说明，配上截图。
   - **完善设计**:
     - 可以考虑使用 Sphinx 或 MkDocs 生成静态站点文档。

2. **任务 5.4.2**: 开发者文档
   - **头脑风暴**:
     - `docs/api/` 下各模块API文档。
     - `docs/developer/plugin_development.md` 更新。
     - `CONTRIBUTING.md` (`docs/contributing.md`)。
     - 架构设计、模块说明 (`Design.md`, `Structure.md`)。
   - **完善设计**:
     - API文档可以使用 Sphinx autodoc 从代码注释生成。
     - 为插件开发者提供清晰的示例和教程。

## 时间线估计

- **阶段 1 (MVP)**: 5 天
- **阶段 2 (后 MVP)**: 11-14 天
- **阶段 3 (模块化功能)**: 8-11 天
- **阶段 4 (高级功能)**: 22-31 天
- **阶段 5 (打磨与分发)**: 11-16 天

**总计**: 约 50 天

## TDD 实施指南

对于标记为 (TDD) 的任务，开发将遵循以下流程：

1. **编写测试**:
   - 在 `tests/` 目录下创建测试文件
   - 编写测试用例，描述预期行为
   - 确保测试失败（红色）

2. **实现功能**:
   - 编写最少量代码使测试通过
   - 确保测试通过（绿色）

3. **重构**:
   - 在不破坏测试的前提下优化代码
   - 消除重复，提高可读性
   - 确保测试仍然通过

对于MVP阶段，核心逻辑优先TDD，UI和简单集成可先实现功能后补测试或以集成测试覆盖。

## 优先级与路径

1. **最高优先级**: 严格按照上述调整后的5天MVP计划执行。
2. **次高优先级**: 阶段 2 中的用户体验优化和核心模块化重构
3. **中等优先级**: 阶段 3 的功能模块实现
4. **较低优先级**: 阶段 4 和 5 的高级功能和打磨

**关键路径**:
- Day 1 -> Day 2 -> Day 3 -> Day 4 -> Day 5 (每个环节紧密相扣)
- 在MVP之后: 模块化重构 -> 功能模块 -> 高级功能 -> 打磨与分发

## 风险与缓解策略

1. **技术风险**:
   - **PySide6 兼容性问题**: 通过全面测试和备选方案缓解
   - **性能瓶颈**: 通过早期性能分析和优化策略缓解

2. **资源风险**:
   - **占位符资源制作耗时**: 风险高。缓解：坚持使用极简占位符，比如纯色块变化或几何图形组合，或找一个简单的开源像素猫素材只取几个关键姿态
   - **开发时间估计不准**: 风险极高。缓解：每日回顾进度，一旦发现滞后，立即削减当日或次日非核心目标，死保核心循环

3. **功能风险**:
   - **模块化设计不足**: 通过早期重构和清晰的接口设计缓解
   - **用户体验不佳**: 通过早期和频繁的用户测试缓解

## 后续更新

本计划文档将根据开发进展定期更新，特别是在完成主要里程碑后。所有更新将记录在文档底部的变更日志中。

## 变更日志

- 2025/05/13: 初始版本
