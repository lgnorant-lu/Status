# Hollow-ming - 项目全局设计文档

## 项目概述

Hollow-ming 是一个基于空洞骑士主题的系统监控桌宠应用，通过虚拟世界元素映射计算机各项性能指标，既实用又有观赏性。项目灵感来源于[赛博小鱼缸](https://github.com/Littlefean/cyber-life)项目，但采用了空洞骑士的美术风格和世界观。

## 核心定位

- 系统监控工具：直观展示系统各项性能指标
- 桌面伴侣：提供高度个性化的交互体验
- 视觉艺术品：使用精美的空洞骑士风格呈现信息

## 技术栈

- 语言：Python
- UI框架：PyQt/PySide 或 Pygame
- 系统监控：psutil, GPUtil等库
- 图形处理：Pillow, OpenCV
- 测试框架：pytest

## 场景与系统指标映射

### 主要场景

#### 1. 德特茅斯(Dirtmouth)
- **主题**：系统概览
- **核心指标**：
  - CPU使用率：小镇居民活跃度
  - 内存使用：小镇灯光数量与亮度
  - 系统运行时间：老人坐椅状态
  - 电池状态：天空亮度

#### 2. 黑卵圣殿(Black Egg Temple)
- **主题**：处理器状态
- **核心指标**：
  - CPU核心负载：骑士雕像数量和状态
  - CPU温度：感染光芒强度
  - 重负载进程：感染泡沫大小
  - GPU使用率：虚空能量涌动

#### 3. 王国边缘(Kingdom's Edge)
- **主题**：网络连接状态
- **核心指标**：
  - 下载速度：灰烬飘落速度
  - 上传速度：飞虫飞行频率
  - 网络延迟：白色防御者动画速度
  - 网络连接状态：场景整体亮度

#### 4. 皇家水道(Royal Waterways)
- **主题**：存储使用情况
- **核心指标**：
  - 磁盘使用率：水位高度
  - 磁盘I/O活动：水流湍急程度
  - 磁盘健康状态：水质清澈度
  - 交换内存：废水区域大小

### 其他可用场景
- 深巢(Deepnest)：系统安全状态
- 苍绿之径(Greenpath)：系统健康状态
- 水晶山峰(Crystal Peak)：内存详细分析
- 安息之地(Resting Grounds)：系统休眠状态

## 交互系统详细设计

### 基础交互
1. **小骑士跟随光标**
   - 小骑士会在一定范围内跟随鼠标光标移动
   - 不同系统状态触发不同动画（普通行走、冲刺、战斗姿态）
   - 当资源占用高时，移动速度变慢，代表系统响应迟缓

2. **点击交互**
   - 左键点击小骑士：打开/关闭主控制面板
   - 右键点击小骑士：显示快捷菜单（场景切换、设置、暂停监控等）
   - 点击场景特定元素：显示对应资源详情（如点击黑卵查看CPU详情）
   - 长按并拖动：移动整个窗口位置

3. **控制面板**
   - 简约设计，保持空洞骑士风格的UI元素（如卷轴、石碑形式）
   - 分类标签：系统概览、性能监控、网络状态、存储分析
   - 折叠式设计，可展开查看详细信息
   - 提供图表化数据（使用符合游戏风格的可视化）

### 高级交互
1. **清理系统**
   - 点击感染气泡触发清理动画，模拟释放内存
   - 小骑士"战斗"动画对应实际清理后台进程
   - 提供"大招"功能（如骑士法术），对应系统优化行动

2. **护符系统**
   - 可装备最多4个护符，每个代表不同监控或功能增强
   - "灵魂收集者"：增强内存监控详细程度
   - "快速聚焦"：提高数据刷新率
   - "坚固力量"：CPU性能分析
   - "迅捷之影"：网络性能分析

3. **任务系统**
   - 完成特定系统操作解锁成就（如连续稳定运行7天）
   - 收集游戏中的地图标记，对应监控不同系统区域
   - 遇到特殊系统事件触发"Boss战"表现

### 提醒系统
1. **状态提醒**
   - 资源紧张时通过角色动画和场景变化提醒用户
   - 轻微提示：场景变暗或小元素变化
   - 明显提示：角色状态变化或NPC警告
   - 紧急提示：类似Boss战前兆动画效果

2. **通知集成**
   - 将系统通知集成为游戏内NPC对话
   - 邮件提醒显示为螳螂部族信使
   - 重要系统事件显示为先知预言

## 个性化功能详细设计

### 外观定制
1. **小骑士外观**
   - 解锁多种骑士皮肤（原版、虚空之心、辐光感染等）
   - 可更换骑士形象为其他角色（大黄蜂、奎若等）
   - 自定义骑士尺寸和透明度

2. **场景定制**
   - 为每个主要场景提供3-5种变体（如不同季节或天气）
   - 自定义场景元素密度和动画频率
   - 调整场景光照和色彩主题

3. **音效与音乐**
   - 开启/关闭游戏原声背景音乐
   - 系统事件触发对应游戏音效
   - 可选择不同区域的背景音乐主题

### 功能定制
1. **监控定制**
   - 选择优先监控的系统指标
   - 自定义警报阈值（如CPU超过85%触发）
   - 设置数据刷新频率和精度

2. **显示定制**
   - 简约模式：只显示小骑士和核心指标
   - 标准模式：显示完整场景和基础动画
   - 详细模式：显示所有视觉效果和详细数据

3. **交互定制**
   - 调整小骑士响应速度和跟随行为
   - 自定义鼠标手势和快捷键
   - 设置自动切换场景的条件

### 用户配置文件
1. **多用户配置**
   - 支持创建多个不同的配置文件
   - 每个配置保存不同的外观、场景和功能设置
   - 快速切换不同配置文件

2. **配置导入/导出**
   - 导出配置为JSON文件便于分享
   - 从文件或云端导入配置
   - 自动备份配置选项

3. **使用统计**
   - 记录系统性能历史数据
   - 提供系统使用模式分析
   - 生成性能报告和建议

## 系统架构

### 模块划分

1. **核心引擎(Core)**
   - 应用初始化与生命周期管理
   - 场景管理与切换
   - 事件系统

2. **系统监控(Monitor)**
   - 数据采集与处理
   - 指标计算
   - 历史数据管理

3. **渲染系统(Renderer)**
   - 场景渲染
   - 动画管理
   - 特效系统

4. **交互系统(Interaction)**
   - 输入处理
   - 交互逻辑
   - 响应处理

5. **配置系统(Config)**
   - 配置文件管理
   - 用户偏好存储
   - 配置导入/导出

6. **资源管理(Resources)**
   - 图像资源
   - 音效资源
   - 字体管理

## 开发规范

### 代码风格
- 遵循PEP 8规范
- 使用类型注解
- 文档字符串使用Google风格

### 模块命名
- 小写下划线分隔
- 类使用PascalCase
- 函数和变量使用snake_case
- 常量使用大写下划线

### 文件结构
- 每个主要模块独立目录
- 测试文件放在tests目录
- 资源文件放在assets目录

### 开发流程
- 遵循TDD（测试驱动开发）原则
- 遵循MVP（最小可行产品）原则
- Git提交信息格式化

## 项目进度计划

### 阶段一：核心框架
- 建立基础窗口系统
- 实现系统监控基础功能
- 创建简单场景渲染

### 阶段二：基础功能
- 实现第一个完整场景（德特茅斯）
- 添加基础交互功能
- 实现指标映射系统

### 阶段三：拓展功能
- 添加更多场景
- 实现护符系统
- 开发个性化设置

### 阶段四：完善与优化
- 添加高级交互功能
- 优化性能
- 完善用户体验

## 注意事项
- 确保应用占用系统资源最小化
- 保持与空洞骑士原作风格一致性
- 优先实现核心功能，再添加额外特性
- 所有主要功能必须有对应测试用例 