# Status-Ming 问题追踪

*此文档用于记录 Status-Ming 项目发现的bug和待解决问题。*

## 活跃问题

### 高优先级
- [2025-05-13] [已解决] 拖动功能有时不响应 (UI/main_pet_window)
  - 修复日期: 2025-05-17
  - 解决方案: 添加拖动阈值、激活状态跟踪和看门狗定时器，防止拖动状态卡住

### 中优先级
- [2025-05-13] [未解决] 宠物动画帧率不稳定 (UI/animation)
- [2025-05-13] [未解决] 主菜单有时显示位置不正确 (UI/menu)
- [2025-05-14] [待解决] 完善对多显示器支持 (UI/main_pet_window)
  - 当前问题: 跨显示器拖拽时可能出现位置计算错误
  - 可能解决方向: 改进屏幕几何信息获取，添加跨屏幕边界检测
- [2025-05-14] [待解决] StatsPanel性能优化 (UI/stats_panel)
  - 当前问题: 在数据快速更新时可能导致UI卡顿
  - 可能解决方向: 减少重绘频率，优化绘制算法，添加缓冲机制

### 低优先级
- [2025-05-13] [未解决] 系统托盘图标在某些Windows版本上模糊 (UI/system_tray)
- [2025-05-15] [待解决] 添加系统托盘图标右键菜单功能 (UI/tray_icon)
  - 当前问题: 缺少配置选项和快速操作
  - 可能解决方向: 设计更丰富的菜单项，添加常用操作
- [2025-05-15] [待解决] 优化内存使用 (Core/system_monitor)
  - 当前问题: 长时间运行可能导致内存占用增加
  - 可能解决方向: 检查潜在的内存泄漏，优化数据结构
- [2025-05-15] [待解决] 完善日志系统 (Core/logging)
  - 当前问题: 缺少可配置的日志级别和轮转
  - 可能解决方向: 实现可配置的日志系统，支持按大小/时间轮转
- [2025-05-15] [待解决][临时跳过] `test_cache_with_compressed_resources` 测试失败 (ResourceLoader/Cache)
  - **模块**: `tests/resources/test_resource_compression.py`
  - **问题描述**: 在测试 `ResourceLoader` 加载压缩资源时的缓存行为时，`test_cache_with_compressed_resources` 持续失败。预期在第一次加载压缩资源后，后续相同的加载请求应从缓存中获取，避免再次调用原始资源获取方法 (`mock_resource_manager.get_resource_content`)。然而，测试结果显示该方法被调用了两次。
  - **状态**: 测试用例已使用 `@pytest.mark.skip` 临时跳过。
  - **已尝试的调试步骤**:
    - 验证了 `ResourceLoader.load_resource` 中的缓存键生成逻辑。
    - 检查了 `use_cache` 参数的传递和使用。
    - 确认了 `pytest` fixture (如 `resource_loader_instance`) 在测试函数内的实例唯一性。
    - 临时简化 `LRUCache` 类的内部实现（使用普通字典替代 `OrderedDict` 并简化方法），问题依旧存在。
    - 检查了 `AssetManager` 调用 `ResourceLoader` 时的参数传递。
  - **初步结论**: 缓存未按预期工作，但静态代码分析未能明确指出根本原因。问题可能与测试环境的某些深层交互或 `unittest.mock` 的行为有关。
  - **后续操作**: 需要更深入的调试，例如在 `ResourceLoader` 和 `LRUCache` 中添加详细日志。

## 已解决问题

- [2025-05-13] [已解决] 窗口拖动不平滑：需要为窗口添加平滑拖动功能 (UI/main_pet_window)
- [2025-05-13] [已解决] 系统托盘菜单不完整：缺少基本功能选项 (UI/system_tray)
- [2025-05-15] [已解决] 系统监控功能不足：缺少实时IO和网络速度，无法监控GPU (监控/system_monitor)
- [2025-05-13] [已解决] 实际状态栏并未显示：虽然代码逻辑正确但StatsPanel未在屏幕上出现 (UI/stats_panel)
- [2025-05-15] [已解决] 开发不符合规范:TDD：缺少测试驱动开发流程和单元测试 (测试/全局)
- [2025-05-15] [已解决] StatsPanel显示未正确跟随主窗口 (UI/stats_panel)
  - 解决日期: 2025-05-15
  - 解决方案: 修复位置计算和更新逻辑，添加调试函数跟踪显示问题
- [2025-05-15] [已解决] 系统监控数据不更新 (Monitoring/system_monitor)
  - 解决日期: 2025-05-15
  - 解决方案: 修复事件分发机制，确保数据更新被正确传递到UI
- [2025-05-17] [已解决] 日志输出冗余，导致日志文件迅速增大 (Monitoring/system_monitor)
  - 解决日期: 2025-05-17
  - 解决方案: 将频繁的信息级日志改为调试级，调整刷新间隔，优化日志输出
- [2025-05-17] [已解决] StatsPanel无法显示CPU/GPU/内存/网络数据 (UI/stats_panel)
  - 解决日期: 2025-05-17
  - 解决方案: 修复数据键名不匹配问题，确保正确处理来自system_monitor的事件数据
  

## 已关闭/不修复问题

- [2025-05-13] [不修复] Windows 7 兼容性问题：决定仅支持 Windows 10 及以上版本 