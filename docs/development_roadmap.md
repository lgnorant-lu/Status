# Status-Ming 开发路线图

**项目名称**: Status-Ming  
**作者**: Ignorant-lu  
**核心技术**: PySide6  
**文档创建日期**: 2025-05-17  
**文档版本**: 1.0

## 当前优先任务

在进入下一阶段开发前，需要完成以下三项关键任务:

1. **修复已知的高优先级bug**
   - 解决 Issue.md 中记录的"拖动功能有时不响应"高优先级问题
   - 修复 StatsPanel 相关的显示和更新问题
   - 解决系统监控数据不更新的问题

2. **完善单元测试覆盖关键功能**
   - 补充主窗口(MainPetWindow)的单元测试
   - 为事件系统添加更全面的单元测试
   - 确保系统监控模块有足够的测试覆盖率
   - 实现UI组件的自动化测试

3. **更新README.md及用户文档**
   - 更新项目根目录的README.md，清晰描述项目功能和使用方法
   - 创建基础用户指南，包括安装说明和常见操作
   - 补充开发者文档，便于其他开发者理解代码结构

## 三阶段开发计划

### 阶段1: 用户体验优化(3-4周)

此阶段重点提升用户体验，增加配置灵活性和行为丰富度。

#### 1.1 配置系统实现 (优先级高)

**目标**: 让用户能够根据个人偏好自定义应用行为和外观。

**任务**:
- **配置文件存储与加载**
  - 设计基于JSON的配置文件结构，支持分层配置
  - 实现配置读写、验证和自动修复功能
  - 添加配置版本管理，支持配置文件升级

- **基础设置界面**
  - 创建模块化设置窗口，使用选项卡分类设置项
  - 实现设置项实时预览功能
  - 添加配置导入/导出和重置功能

- **自定义监控参数**
  - 允许用户设置CPU/内存/GPU负载阈值
  - 支持自定义监控刷新频率
  - 提供监控项显示选择(可开启/关闭特定项目)

- **主题与外观定制**
  - 实现基础主题系统，支持明暗模式切换
  - 允许自定义StatsPanel透明度、位置和大小
  - 添加字体和颜色方案自定义选项

**技术挑战**:
- 确保配置文件兼容性和稳健性
- 设计直观且易用的设置界面
- 平衡自定义灵活性和界面复杂度

#### 1.2 桌宠行为丰富 (优先级中)

**目标**: 增加桌宠行为多样性和互动性，提升用户粘性。

**任务**:
- **时间驱动的行为模式**
  - 实现`TimeBasedBehaviorSystem`组件，根据系统时间触发行为
  - 设计不同时间段(早晨/中午/下午/夜晚)的特定行为
  - 添加特殊日期(节日)的独特表现

- **系统负载响应行为**
  - 细化CPU负载状态响应，划分更多级别的状态
  - 增加GPU、网络流量、磁盘I/O的专属反应
  - 实现多状态同时出现时的优先级处理机制

- **用户互动响应**
  - 设计鼠标互动区域，实现区域特定反应
  - 支持点击、双击、右键等多种互动方式
  - 添加互动频率追踪，动态调整反应强度

**技术挑战**:
- 实现平滑的状态转换机制
- 平衡行为预测性和随机性
- 优化资源使用，避免过多动画导致性能问题

#### 1.3 系统监控优化 (优先级中)

**目标**: 提供更全面、直观的系统信息展示。

**任务**:
- **分区级磁盘监控**
  - 扩展`get_disk_usage`函数，支持所有分区信息获取
  - 实现分区级I/O监控，跟踪单个分区活动
  - 设计分区信息展示组件，支持详情展开/折叠

- **网络监控展示优化**
  - 添加连接统计功能，显示活跃连接数量
  - 优化网络速度展示，添加速度波动图
  - 实现流量异常提醒功能

- **系统信息历史趋势**
  - 设计简洁的历史数据图表组件
  - 支持CPU、内存、网络等关键指标的趋势显示
  - 提供不同时间段(5分钟/30分钟/1小时)数据查看

**技术挑战**:
- 确保额外监控不会增加过多系统负担
- 平衡信息全面性和界面简洁性
- 处理图表渲染的性能问题

### 阶段2: 功能模块扩展(4-5周)

此阶段重点添加实用功能模块，提升应用的实用价值。

#### 2.1 番茄钟模块 (优先级高)

**目标**: 提供专注工作和休息管理工具，提升用户工作效率。

**任务**:
- **番茄钟核心计时功能**
  - 实现工作/短休息/长休息计时循环
  - 支持自定义工作和休息时间
  - 添加计时暂停、重置和跳过功能

- **番茄钟UI界面**
  - 设计专注模式计时器界面
  - 添加当前状态和剩余时间显示
  - 实现直观的控制按钮和进度展示

- **桌宠行为联动**
  - 工作时间段显示专注状态动画
  - 休息时间段显示放松状态动画
  - 计时完成时触发特定提醒动画

**技术挑战**:
- 确保计时器在后台运行的准确性
- 设计不打扰用户工作的提醒方式
- 实现与系统通知的整合

#### 2.2 便签模块 (优先级中)

**目标**: 提供快捷笔记功能，帮助用户记录想法和任务。

**任务**:
- **本地存储便签系统**
  - 设计便签数据模型和存储结构
  - 实现便签的创建、读取、更新和删除功能
  - 支持便签标签和优先级管理

- **便签编辑界面**
  - 设计简洁的便签列表和编辑界面
  - 实现便签拖拽排序和快速编辑
  - 添加搜索和筛选功能

- **格式化和分类**
  - 支持基础文本格式化(粗体/斜体/列表)
  - 实现便签分类和颜色标记
  - 添加重要便签置顶功能

**技术挑战**:
- 设计高效的本地存储机制
- 实现流畅的编辑体验
- 平衡功能丰富度和界面简洁性

#### 2.3 快捷启动器 (优先级中)

**目标**: 提供快速启动常用应用的功能，提升工作效率。

**任务**:
- **应用快速启动功能**
  - 实现常用应用程序启动管理
  - 支持命令行参数和启动选项
  - 添加最近使用程序自动收录

- **启动器UI界面**
  - 设计简洁的应用列表界面
  - 实现快速搜索和应用筛选
  - 支持键盘导航和快捷键启动

- **自定义程序添加**
  - 提供手动添加应用的界面
  - 支持从文件系统浏览选择程序
  - 允许自定义启动图标和名称

**技术挑战**:
- 跨平台程序路径和启动处理
- 优化启动器的响应速度
- 实现与系统集成(如全局热键)

### 阶段3: 架构优化与高级功能(6-8周)

此阶段重点优化系统架构，并添加高级功能模块。

#### 3.1 核心架构优化 (优先级高)

**目标**: 提升代码质量，优化系统性能，增强可扩展性。

**任务**:
- **事件系统重构**
  - 添加事件优先级支持
  - 实现事件过滤和节流机制
  - 开发异步事件处理能力

- **插件系统设计**
  - 创建`PluginManager`和`PluginBase`抽象类
  - 定义插件生命周期和依赖解析机制
  - 实现插件热加载/卸载功能

- **模块化框架完善**
  - 重新审视模块职责划分
  - 实现模块懒加载机制
  - 设计统一的模块间通信机制

**技术挑战**:
- 确保向后兼容性，避免破坏现有功能
- 平衡抽象层次和性能开销
- 保证模块间低耦合高内聚

#### 3.2 情感系统实现 (优先级中)

**目标**: 增加桌宠的情感模拟，提升拟人化程度和用户互动感。

**任务**:
- **情感参数系统**
  - 实现多维情感参数(愉悦度/活力/亲密度)
  - 添加事件和互动对情感的影响机制
  - 设计情感自然衰减系统

- **情感状态与行为联动**
  - 将情感状态映射到行为表现
  - 实现情感组合产生的复杂行为
  - 添加情感阈值触发的特殊行为

- **互动情感反馈**
  - 设计用户互动对情感的影响规则
  - 实现不同情感状态下的互动反应差异
  - 添加长期互动记忆和行为适应

**技术挑战**:
- 设计合理且自然的情感变化算法
- 避免情感系统过度复杂导致行为不可预测
- 平衡随机性和一致性

#### 3.3 高级监控功能 (优先级低)

**目标**: 提供深度系统监控和分析能力，满足高级用户需求。

**任务**:
- **进程级资源监控**
  - 实现进程资源使用统计
  - 添加高资源占用进程提醒
  - 支持自定义关注的应用程序

- **应用活动分析**
  - 跟踪应用使用时间和频率
  - 提供应用使用统计报告
  - 实现应用使用模式识别

- **系统异常警报**
  - 设计资源异常检测算法
  - 实现自定义阈值警报系统
  - 添加预警和建议功能

**技术挑战**:
- 实现低开销的系统深度监控
  - 使用采样和异步处理减少性能影响
  - 优化数据收集和存储策略
- 处理权限和安全问题
  - 明确区分需要特权的监控功能
  - 提供无特权模式下的降级功能
- 确保分析准确性和实用性
  - 避免误报和过度警报
  - 确保建议的实用性和适用性

## 实施策略

### 开发流程

1. **测试驱动开发(TDD)**
   - 优先编写测试用例，明确功能要求
   - 编写最小实现使测试通过
   - 重构代码提高质量，保持测试通过

2. **增量式开发**
   - 将大功能分解为小的可独立实现的部分
   - 每个部分完成后进行单独测试和集成
   - 定期合并到主分支并发布预览版

3. **代码审查**
   - 每个功能实现后进行自我审查
   - 使用静态分析工具检查代码质量
   - 定期进行全面代码审查

### 版本计划

1. **v0.9.0**: 当前任务完成(修复bugs、完善测试、更新文档)
2. **v0.9.5**: 配置系统基础实现
3. **v0.9.8**: 桌宠行为丰富和系统监控优化
4. **v1.0.0**: 阶段1完成，第一个稳定版本发布
5. **v1.1.0**: 番茄钟模块实现
6. **v1.2.0**: 便签和快捷启动器模块
7. **v1.5.0**: 核心架构优化完成
8. **v2.0.0**: 全部三阶段功能完成

### 质量保证

1. **测试覆盖率目标**
   - 核心模块: >80%
   - UI组件: >60%
   - 功能模块: >70%

2. **性能目标**
   - 内存占用: <150MB
   - CPU占用(空闲): <2%
   - 启动时间: <3秒

3. **用户体验目标**
   - UI响应时间: <100ms
   - 操作流畅性: 无明显卡顿
   - 直观性: 关键功能无需查看文档即可使用

## 资源规划

### 开发工具

- **开发环境**: VS Code, PyCharm
- **版本控制**: Git
- **CI/CD**: GitHub Actions
- **文档工具**: Markdown, Sphinx

### 依赖管理

- 明确固定核心依赖版本
- 最小化第三方库依赖
- 定期审查和更新依赖

### 时间分配

- **阶段1**: 3-4周 (约20个工作日)
  - 配置系统: 8天
  - 桌宠行为: 6天
  - 系统监控优化: 6天

- **阶段2**: 4-5周 (约25个工作日)
  - 番茄钟模块: 8天
  - 便签模块: 8天
  - 快捷启动器: 9天

- **阶段3**: 6-8周 (约35个工作日)
  - 核心架构优化: 15天
  - 情感系统: 10天
  - 高级监控功能: 10天

## 风险管理

### 潜在风险

1. **技术风险**
   - **风险**: PySide6兼容性问题和API变化
   - **缓解**: 固定依赖版本，做好兼容性测试

2. **范围风险**
   - **风险**: 功能蔓延，计划无法按时完成
   - **缓解**: 严格优先级管理，采用MVP思维

3. **资源风险**
   - **风险**: 开发时间估计不准确
   - **缓解**: 设置缓冲时间，定期调整计划

### 应对策略

1. **周期性计划审查**
   - 每两周审查一次计划进度
   - 根据实际进展调整后续计划

2. **快速迭代与反馈**
   - 完成功能后立即测试和收集反馈
   - 根据反馈快速调整开发方向

3. **灵活的功能优先级**
   - 保持核心功能和可选功能的明确划分
   - 准备随时调整非核心功能的优先级

---

**注**: 此路线图将根据实际开发进展定期更新。最新版本请参考项目仓库中的docs/development_roadmap.md文件。 